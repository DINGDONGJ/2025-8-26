# ğŸ“– ä»åµŒå…¥å¼AIåˆ°ç¾¤ä½“æ™ºèƒ½ï¼šä¸€ä»½å…¨é¢çš„æŠ€æœ¯ä¸æ¦‚å¿µè§£ææ–‡æ¡£

## ç›®å½•

- [ç¬¬ä¸€ç« ï¼šåµŒå…¥å¼AIä¸TinyMLåŸºç¡€](#ç¬¬ä¸€ç« åµŒå…¥å¼aiä¸tinymlåŸºç¡€)
- [ç¬¬äºŒç« ï¼šæ ¸å¿ƒæŠ€æœ¯é€‰å‹ï¼šæ¡†æ¶ã€æ¨¡å‹ä¸èŠ¯ç‰‡](#ç¬¬äºŒç« æ ¸å¿ƒæŠ€æœ¯é€‰å‹æ¡†æ¶æ¨¡å‹ä¸èŠ¯ç‰‡)
- [ç¬¬ä¸‰ç« ï¼šAIäº¤äº’çš„è¿›åŒ–ï¼ˆä»£ç ä¸å®ç°æ·±åº¦è§£æï¼‰](#ç¬¬ä¸‰ç« aiäº¤äº’çš„è¿›åŒ–ä»£ç ä¸å®ç°æ·±åº¦è§£æ)
- [ç¬¬å››ç« ï¼šæ€»ç»“ä¸æœªæ¥å±•æœ›](#ç¬¬å››ç« æ€»ç»“ä¸æœªæ¥å±•æœ›)

---

## ç¬¬ä¸€ç« ï¼šåµŒå…¥å¼AIä¸TinyMLåŸºç¡€

### 1.1 ä»€ä¹ˆæ˜¯åµŒå…¥å¼AIï¼Ÿ

**åµŒå…¥å¼AIï¼ˆEmbedded AIï¼‰**æˆ–**è¾¹ç¼˜AIï¼ˆEdge AIï¼‰**ï¼ŒæŒ‡çš„æ˜¯å°†**AIè®¡ç®—ï¼ˆç‰¹åˆ«æ˜¯æ¨¡å‹æ¨ç†ï¼‰**ä»äº‘ç«¯æœåŠ¡å™¨è¿ç§»åˆ°ç»ˆç«¯è®¾å¤‡ä¸Šæ‰§è¡Œçš„æŠ€æœ¯èŒƒå¼ã€‚è¿™äº›"è¾¹ç¼˜"è®¾å¤‡å¯ä»¥æ˜¯æ™ºèƒ½æ‰‹æœºã€**ç‰©è”ç½‘(IoT)è®¾å¤‡**ã€æ±½è½¦ã€å·¥ä¸šæ§åˆ¶å™¨ç­‰ã€‚å…¶æ ¸å¿ƒåœ¨äºå°†**æ™ºèƒ½å†³ç­–èƒ½åŠ›**èµ‹äºˆè®¾å¤‡æœ¬èº«ï¼Œä½¿å…¶èƒ½å¤Ÿç‹¬ç«‹ã€å®æ—¶åœ°å“åº”ç¯å¢ƒå˜åŒ–ã€‚

### 1.2 ä»€ä¹ˆæ˜¯TinyMLï¼Ÿ

**TinyML**æ˜¯åµŒå…¥å¼AIçš„ä¸€ä¸ªå‰æ²¿å­é¢†åŸŸï¼Œå®ƒä¸“æ³¨äºåœ¨åŠŸè€—å’Œæˆæœ¬æä½çš„**å¾®æ§åˆ¶å™¨ï¼ˆMCUï¼‰**ä¸Šéƒ¨ç½²å’Œè¿è¡Œæœºå™¨å­¦ä¹ æ¨¡å‹ã€‚å¦‚æœè¯´åµŒå…¥å¼AIçš„ç›®æ ‡æ˜¯åœ¨"è¾¹ç¼˜"è¿›è¡Œè®¡ç®—ï¼Œé‚£ä¹ˆTinyMLåˆ™è‡´åŠ›äºå°†æ™ºèƒ½æ¨å‘"æœ€æœ«æ¢¢"çš„æ„ŸçŸ¥èŠ‚ç‚¹ã€‚å…¶æ ¸å¿ƒç‰¹å¾æ˜¯**æ¯«ç“¦(mW)ä¹ƒè‡³å¾®ç“¦(ÂµW)çº§åˆ«çš„åŠŸè€—**ã€**æ•°æœˆç”šè‡³æ•°å¹´çš„ç”µæ± ç»­èˆªèƒ½åŠ›**å’Œ**æä½çš„ç¡¬ä»¶æˆæœ¬**ã€‚

### 1.3 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åµŒå…¥å¼AIä¸TinyMLï¼Ÿ

æˆ‘ä»¬ä¹‹æ‰€ä»¥éœ€è¦è¿™é¡¹æŠ€æœ¯ï¼Œæ˜¯ä¸ºäº†å…‹æœä¼ ç»Ÿäº‘ç«¯AIåœ¨ç‰©ç†ä¸–ç•Œåº”ç”¨ä¸­çš„**å››å¤§æ ¸å¿ƒç“¶é¢ˆ**ï¼š

1. **è§£å†³å®æ—¶æ€§ä¸ç½‘ç»œä¾èµ–é—®é¢˜**ï¼šäº‘ç«¯AIéœ€è¦å°†æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ï¼Œä¸€æ¥ä¸€å›çš„**ç½‘ç»œå»¶è¿Ÿ**å¯¹äºéœ€è¦ç¬æ—¶å“åº”çš„åœºæ™¯ï¼ˆå¦‚è‡ªåŠ¨é©¾é©¶ã€å·¥ä¸šæ§åˆ¶ï¼‰æ˜¯è‡´å‘½çš„ã€‚åµŒå…¥å¼AIåœ¨**æœ¬åœ°è¿›è¡Œè®¡ç®—**ï¼Œå“åº”é€Ÿåº¦æå¿«ï¼Œä¸”åœ¨ç½‘ç»œä¸­æ–­æ—¶ä¾ç„¶å¯ä»¥å·¥ä½œã€‚
2. **ä¿æŠ¤æ•°æ®éšç§ä¸å®‰å…¨**ï¼šå¯¹äºæ™ºèƒ½å®¶å±…çš„è¯­éŸ³ã€å®‰é˜²æ‘„åƒå¤´çš„ç”»é¢ç­‰æ•æ„Ÿæ•°æ®ï¼Œå°†å…¶å‘é€åˆ°äº‘ç«¯å­˜åœ¨éšç§æ³„éœ²çš„é£é™©ã€‚åµŒå…¥å¼AIè®©**æ•°æ®å¤„ç†åœ¨æœ¬åœ°é—­ç¯**ï¼Œæœ€å¤§é™åº¦åœ°ä¿éšœäº†ç”¨æˆ·éšç§ã€‚
3. **é™ä½è¿è¥æˆæœ¬**ï¼šå¯¹äºå¤§è§„æ¨¡ç‰©è”ç½‘åº”ç”¨ï¼ŒæŒç»­å°†æµ·é‡ä¼ æ„Ÿå™¨æ•°æ®ä¸Šä¼ åˆ°äº‘ç«¯è¿›è¡Œè®¡ç®—ï¼Œä¼šäº§ç”Ÿé«˜æ˜‚çš„å¸¦å®½å’Œäº‘æœåŠ¡è´¹ç”¨ã€‚åµŒå…¥å¼AIé€šè¿‡åœ¨**æœ¬åœ°å¤„ç†ä¿¡æ¯**ï¼Œåªåœ¨å¿…è¦æ—¶ä¸Šä¼ å°‘é‡ç»“æœï¼Œæå¤§åœ°é™ä½äº†é•¿æœŸè¿è¥æˆæœ¬ã€‚
4. **çªç ´åŠŸè€—ä¸æˆæœ¬çš„é™åˆ¶ (TinyMLçš„æ ¸å¿ƒä»·å€¼)**ï¼šä¼ ç»Ÿçš„AIéœ€è¦å¼ºå¤§çš„å¤„ç†å™¨å’ŒæŒç»­çš„ç”µåŠ›ä¾›åº”ã€‚TinyMLé€šè¿‡**æè‡´çš„è½¯ç¡¬ä»¶ä¼˜åŒ–**ï¼Œä½¿å¾—åœ¨ä¾é ä¸€é¢—çº½æ‰£ç”µæ± å°±èƒ½å·¥ä½œæ•°å¹´çš„å¾®å°è®¾å¤‡ä¸Šå®ç°æ™ºèƒ½æˆä¸ºå¯èƒ½ï¼Œä»è€Œæ‰“å¼€äº†å°†AIèµ‹èƒ½åˆ°æ•°ä»¥ä¸‡äº¿è®¡çš„å¾®å‹è®¾å¤‡çš„æƒ³è±¡ç©ºé—´ã€‚

### 1.4 æ ¸å¿ƒä¼˜åŠ¿

- âš¡ï¸ **ä½åŠŸè€—**: å¯é ç”µæ± å®ç°é•¿æœŸç»­èˆªï¼Œæ‘†è„±å¯¹ç”µç½‘çš„ä¾èµ–ã€‚
- â±ï¸ **ä½å»¶è¿Ÿ**: æ•°æ®åœ¨æœ¬åœ°å¤„ç†ï¼Œæ— éœ€ç½‘ç»œå¾€è¿”ï¼Œå“åº”é€Ÿåº¦å¿«ï¼Œé€‚ç”¨äºå®æ—¶æ§åˆ¶åœºæ™¯ã€‚
- ğŸ”’ **ä¿æŠ¤éšç§**: æ•æ„Ÿæ•°æ®ï¼ˆå¦‚éŸ³é¢‘ã€å›¾åƒï¼‰ä¸ç¦»å¼€æœ¬åœ°è®¾å¤‡ï¼Œæ˜¯ä¿éšœç”¨æˆ·éšç§çš„å¤©ç„¶å±éšœã€‚
- ğŸŒ **é«˜å¯é æ€§**: ä¸ä¾èµ–ç½‘ç»œè¿æ¥ï¼Œå¯åœ¨ç¦»çº¿ç¯å¢ƒä¸‹ç¨³å®šå·¥ä½œï¼Œé€‚ç”¨äºç½‘ç»œä¸ä½³çš„å·¥ä¸šæˆ–é‡å¤–ç¯å¢ƒã€‚
- ğŸ’° **ä½æˆæœ¬**: ç¡¬ä»¶æˆæœ¬ä½å»‰ï¼Œä½¿å¾—å°†æ™ºèƒ½èµ‹èƒ½åˆ°æ•°ä»¥ä¸‡äº¿è®¡çš„è®¾å¤‡ä¸­æˆä¸ºå¯èƒ½ã€‚

---

## ç¬¬äºŒç« ï¼šæ ¸å¿ƒæŠ€æœ¯é€‰å‹ï¼šæ¡†æ¶ã€æ¨¡å‹ä¸èŠ¯ç‰‡

ä¸ºå®ç°åµŒå…¥å¼AIå’ŒTinyMLåº”ç”¨ï¼Œéœ€è¦å¯¹è½¯ä»¶æ¡†æ¶ã€AIæ¨¡å‹ç®—æ³•å’Œç¡¬ä»¶å¹³å°è¿›è¡Œç»¼åˆé€‰å‹ã€‚

### 2.1 AIæ¨ç†æ¡†æ¶ä¸å·¥å…·é“¾

**AIæ¨ç†æ¡†æ¶**æ˜¯è¿æ¥AIæ¨¡å‹ä¸åµŒå…¥å¼ç¡¬ä»¶çš„"æ¡¥æ¢"ï¼Œè´Ÿè´£åœ¨èµ„æºå—é™çš„è®¾å¤‡ä¸Šé«˜æ•ˆæ‰§è¡Œæ¨¡å‹ã€‚

**è¡¨1ï¼šä¸»æµåµŒå…¥å¼AIæ¨ç†æ¡†æ¶å¯¹æ¯”**

| æ¡†æ¶åç§° | ä¸»è¦å‚å•†/ç»„ç»‡ | æ ¸å¿ƒç‰¹ç‚¹ | é€‚ç”¨ç¡¬ä»¶ | å…¸å‹åœºæ™¯ |
|---------|-------------|---------|----------|----------|
| TensorFlow Lite (TFLite) | Google | ç”Ÿæ€æœ€å…¨é¢ï¼Œè·¨å¹³å°èƒ½åŠ›å¼ºï¼Œæ”¯æŒé‡åŒ–ã€å‰ªæç­‰å¤šç§ä¼˜åŒ– | CPU, GPU, DSP, Edge TPU, MCU | å®‰å“åº”ç”¨ã€è·¨å¹³å°é¡¹ç›®ã€ç‰©è”ç½‘è®¾å¤‡ |
| Core ML | Apple | ä¸è‹¹æœç¡¬ä»¶(ANE)æ·±åº¦é›†æˆï¼Œå¼€å‘ä½“éªŒæç®€ | Apple A/Mç³»åˆ—èŠ¯ç‰‡ (iPhone, Mac) | æ‰€æœ‰è‹¹æœç”Ÿæ€å†…çš„App |
| TensorRT | NVIDIA | æè‡´æ¨ç†æ€§èƒ½ï¼Œé€šè¿‡å±‚èåˆã€ç²¾åº¦æ ¡å‡†ç­‰æ·±åº¦ä¼˜åŒ– | NVIDIA GPU (Jetson, æ•°æ®ä¸­å¿ƒ) | è‡ªåŠ¨é©¾é©¶ã€æœºå™¨äººã€é«˜æ€§èƒ½è§†é¢‘åˆ†æ |
| OpenVINO | Intel | ä¸“ä¸ºè‹±ç‰¹å°”ç¡¬ä»¶ä¼˜åŒ–ï¼Œæ”¯æŒCPU/iGPU/VPUå¼‚æ„è®¡ç®— | Intel CPU, é›†æˆæ˜¾å¡, Movidius VPU | å·¥ä¸šè§†è§‰ã€æ™ºæ…§é›¶å”®ã€åŒ»ç–—å½±åƒ |
| SNPE | Qualcomm | å……åˆ†åˆ©ç”¨éªé¾™èŠ¯ç‰‡çš„CPU/GPU/DSPå¼‚æ„è®¡ç®—èƒ½åŠ› | é«˜é€šéªé¾™ç³»åˆ—èŠ¯ç‰‡ | å®‰å“æ‰‹æœºã€XRè®¾å¤‡ã€æ™ºèƒ½åº§èˆ± |
| ONNX Runtime | Microsoft / å¼€æº | è·¨æ¡†æ¶äº’æ“ä½œæ€§å¼ºï¼Œåç«¯æ”¯æŒå¤šç§ç¡¬ä»¶åŠ é€Ÿåº“ | è·¨å¹³å°ï¼Œæ”¯æŒå¤šç§CPU/GPU | éœ€è¦ç»Ÿä¸€æ¨¡å‹éƒ¨ç½²æ ‡å‡†çš„ä¼ä¸šé¡¹ç›® |
| STM32Cube.AI | STMicroelectronics | å°†æ¨¡å‹ç›´æ¥è½¬æ¢ä¸ºä¸ºSTM32ä¼˜åŒ–çš„Cä»£ç ï¼Œä¸ç¡¬ä»¶å¼€å‘ç¯å¢ƒæ— ç¼é›†æˆ | ST STM32ç³»åˆ—MCU | å·¥ä¸šæ§åˆ¶ã€æ¶ˆè´¹ç”µå­ã€ç‰©è”ç½‘ç»ˆç«¯ |
| Edge Impulse | Edge Impulse Inc. | Webç«¯ä¸€ç«™å¼å¹³å°ï¼Œæå¤§é™ä½å¼€å‘é—¨æ§› | è·¨å¹³å°ï¼Œæ”¯æŒå„ç±»ä¸»æµMCU | å¿«é€ŸåŸå‹éªŒè¯ã€åˆå­¦è€…ã€ä¼ æ„Ÿå™¨åº”ç”¨ |

### 2.2 è½»é‡åŒ–AIæ¨¡å‹å®¶æ—

è¿™äº›æ¨¡å‹åœ¨ç»“æ„è®¾è®¡ä¸Šå°±å…¼é¡¾äº†**é«˜ç²¾åº¦ä¸ä½è®¡ç®—é‡**çš„è¦æ±‚ã€‚

**è¡¨2ï¼šå¸¸è§è½»é‡åŒ–AIæ¨¡å‹å®¶æ—**

| æ¨¡å‹ç±»åˆ« | æ¨¡å‹å®¶æ—/ç®—æ³• | æ ¸å¿ƒæ€æƒ³/æŠ€æœ¯ | é€‚ç”¨ä»»åŠ¡ | è½»é‡åŒ–ä¼˜åŠ¿ |
|---------|-------------|-------------|----------|-----------|
| å›¾åƒåˆ†ç±» | MobileNet (v1-v3) | æ·±åº¦å¯åˆ†ç¦»å·ç§¯ã€å€’æ®‹å·®ã€NAS | ä½œä¸ºæ£€æµ‹ã€åˆ†å‰²ç­‰ä»»åŠ¡çš„éª¨å¹²ç½‘ç»œ | å¼€åˆ›äº†è½»é‡åŒ–CNNçš„å…ˆæ²³ï¼Œå¹³è¡¡é€Ÿåº¦ä¸ç²¾åº¦ |
| å›¾åƒåˆ†ç±» | EfficientNet-Lite | å¤åˆç¼©æ”¾æ¨¡å‹å°ºå¯¸ï¼Œç§»é™¤ç§»åŠ¨ç«¯ä¸å‹å¥½ç®—å­ | å›¾åƒåˆ†ç±»ã€ç‰¹å¾æå– | åœ¨åŒç­‰ç®—åŠ›ä¸‹ç²¾åº¦æé«˜ |
| ç›®æ ‡æ£€æµ‹ | YOLO (v5n/s, v8n/s) | å•é˜¶æ®µæ£€æµ‹ï¼Œå›å½’æ€æƒ³ï¼Œç»“æ„å¯ä¼¸ç¼© | å®æ—¶è§†é¢‘ç›®æ ‡æ£€æµ‹ | é€Ÿåº¦æå¿«ï¼Œæ‹¥æœ‰å¤šç§ä¸ºåµŒå…¥å¼è®¾è®¡çš„å¾®å°ç‰ˆæœ¬ |
| ç›®æ ‡æ£€æµ‹ | SSDLite | å°†SSDçš„éª¨å¹²ç½‘æ›¿æ¢ä¸ºMobileNetç­‰è½»é‡ç½‘ç»œ | ç§»åŠ¨ç«¯ç›®æ ‡æ£€æµ‹ | ç»“æ„ç®€å•ï¼Œæ¨ç†é«˜æ•ˆ |
| è‡ªç„¶è¯­è¨€å¤„ç† | MobileBERT | çŸ¥è¯†è’¸é¦ã€ç“¶é¢ˆå±‚ç»“æ„ | ç«¯ä¾§NLPä»»åŠ¡ï¼ˆæ„å›¾è¯†åˆ«ã€æ–‡æœ¬åˆ†ç±»ï¼‰ | ä½“ç§¯å’Œé€Ÿåº¦ç›¸æ¯”BERTå¤§å¹…ä¼˜åŒ–ï¼Œç²¾åº¦æŸå¤±å° |
| éŸ³é¢‘å¤„ç† | YamNet | åŸºäºMobileNetV1æ¶æ„ | éŸ³é¢‘äº‹ä»¶åˆ†ç±»ã€å£°éŸ³åœºæ™¯è¯†åˆ« | é€šç”¨æ€§å¼ºï¼Œå¯ä½œä¸ºéŸ³é¢‘ç‰¹å¾æå–å™¨ |
| ä¼ æ„Ÿå™¨æ•°æ® | Autoencoder (è‡ªç¼–ç å™¨) | æ— ç›‘ç£å­¦ä¹ ï¼Œé€šè¿‡é‡å»ºè¯¯å·®åˆ¤æ–­å¼‚å¸¸ | å¼‚å¸¸æ£€æµ‹ï¼ˆæŒ¯åŠ¨ã€åŠŸè€—ç­‰æ—¶åºæ•°æ®ï¼‰ | æ¨¡å‹ç»“æ„å¯è‡ªå®šä¹‰ï¼Œéå¸¸è½»é‡ï¼Œé€‚åˆMCU |

### 2.3 åµŒå…¥å¼AIç¡¬ä»¶å¹³å°

**ç¡¬ä»¶**æ˜¯AIç®—æ³•è¿è¡Œçš„ç‰©ç†è½½ä½“ï¼Œå…¶é€‰å‹ç›´æ¥å†³å®šäº†é¡¹ç›®çš„**åŠŸè€—ã€æˆæœ¬å’Œæ€§èƒ½ä¸Šé™**ã€‚

**è¡¨3ï¼šä¸»æµåµŒå…¥å¼/TinyMLç¡¬ä»¶å¹³å°**

| ç¡¬ä»¶ç±»åˆ« | ä»£è¡¨å‹å·/ç³»åˆ— | å…³é”®ç‰¹æ€§ | æ¨èå¼€å‘å·¥å…·/æ¡†æ¶ | ç†æƒ³åº”ç”¨ |
|---------|-------------|---------|-----------------|----------|
| é€šç”¨MCU | STMicroelectronics STM32 | å¸‚åœºå æœ‰ç‡é«˜ï¼Œç¨³å®šå¯é ï¼Œå‹å·ä¸°å¯Œ | STM32Cube.AI, TFLite Micro | å·¥ä¸šæ§åˆ¶ã€æ™ºèƒ½å®¶å±…ã€æ¶ˆè´¹ç”µå­ |
| é€šç”¨MCU | Espressif ESP32-S3 | è‡ªå¸¦Wi-Fi/è“ç‰™ï¼Œå¼ºå¤§çš„åŒæ ¸ï¼Œå«AIå‘é‡æŒ‡ä»¤ | TFLite Micro, ESP-IDF, Edge Impulse | AIoTäº§å“ã€å¿«é€ŸåŸå‹ã€è¯­éŸ³æ§åˆ¶ |
| é€šç”¨MCU | Nordic nRF52/nRF53 | æè‡´ä½åŠŸè€—è“ç‰™(BLE)æ€§èƒ½ | TFLite Micro, nRF Connect SDK | å¯ç©¿æˆ´è®¾å¤‡ã€æ— çº¿åŒ»ç–—ã€ä¿¡æ ‡ |
| AIåŠ é€ŸMCU | Ambiq Apollo4 | SPOTâ„¢äºšé˜ˆå€¼åŠŸè€—æŠ€æœ¯ï¼Œèƒ½æ•ˆæ¯”æé«˜ | TFLite Micro, Edge Impulse | è¯­éŸ³å”¤é†’ã€å¥åº·ç›‘æµ‹ã€ç”µæ± ä¾›ç”µäº§å“ |
| AIåŠ é€ŸMCU | é›†æˆARM Ethos-Uçš„MCU | å†…ç½®å¾®å‹NPUï¼Œç¡¬ä»¶åŠ é€ŸAIè¿ç®— | TFLite Micro | éœ€è¦æ›´é«˜æ€§èƒ½çš„ç«¯ä¾§AIæ¨ç†åœºæ™¯ |
| é«˜æ€§èƒ½è¾¹ç¼˜è®¡ç®— | NVIDIA Jetson ç³»åˆ— | å¼ºå¤§çš„GPUç®—åŠ›ï¼Œå®Œå–„çš„CUDA/TensorRTç”Ÿæ€ | TensorRT, DeepStream | æœºå™¨äººã€æ— äººæœºã€æ™ºèƒ½è§†é¢‘ç›‘æ§(IVA) |

### 2.4 æ¨¡å‹éƒ¨ç½²å®æˆ˜ï¼šä»¥TFLiteä¸ºä¾‹ï¼ˆæ–°æ‰‹å…¥é—¨ï¼‰

#### ä¸ºä»€ä¹ˆè¦å­¦ä¹ è¿™ä¸ªéƒ¨ç½²æµç¨‹ï¼Ÿ

**AIæ¨¡å‹çš„è®­ç»ƒï¼ˆå­¦ä¹ è¿‡ç¨‹ï¼‰å’Œéƒ¨ç½²ï¼ˆåº”ç”¨è¿‡ç¨‹ï¼‰**æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ä¸–ç•Œã€‚è®­ç»ƒå‘ç”Ÿåœ¨æ‹¥æœ‰å¼ºå¤§GPUå’Œæµ·é‡æ•°æ®çš„PCæˆ–æœåŠ¡å™¨ä¸Šï¼Œè€Œéƒ¨ç½²åˆ™å‘ç”Ÿåœ¨èµ„æºæå…¶æœ‰é™çš„åµŒå…¥å¼è®¾å¤‡ä¸Šã€‚æœ¬èŠ‚å±•ç¤ºçš„éƒ¨ç½²æµç¨‹ï¼Œæ­£æ˜¯**è¿æ¥è¿™ä¸¤ä¸ªä¸–ç•Œçš„æ¡¥æ¢**ã€‚æŒæ¡è¿™ä¸ªæµç¨‹ï¼Œæ„å‘³ç€ä½ ä¸ä»…èƒ½åˆ›é€ ä¸€ä¸ªAIæ¨¡å‹ï¼Œæ›´èƒ½å°†å®ƒè½¬åŒ–ä¸ºä¸€ä¸ªå¯ä»¥åœ¨çœŸå®äº§å“ä¸­è¿è¡Œçš„åŠŸèƒ½ã€‚å¯¹äºä»»ä½•æƒ³å¼€å‘**AIoTï¼ˆæ™ºèƒ½ç‰©è”ç½‘ï¼‰**äº§å“çš„å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œç†è§£å¹¶å®è·µä»**æ¨¡å‹è½¬æ¢ã€é‡åŒ–åˆ°Cæ•°ç»„ç”Ÿæˆ**çš„æ¯ä¸€æ­¥ï¼Œæ˜¯å°†AIä»ç†è®ºå˜ä¸ºç°å®çš„å…³é”®æŠ€èƒ½ã€‚

#### åŸç†ä»‹ç»

å°†ä¸€ä¸ªAIæ¨¡å‹éƒ¨ç½²åˆ°**å¾®æ§åˆ¶å™¨ï¼ˆMCUï¼‰**ä¸Šï¼Œéµå¾ªä¸€ä¸ª**"PCç«¯è®­ç»ƒï¼Œç»ˆç«¯éƒ¨ç½²"**çš„æ ‡å‡†æµç¨‹ã€‚å› ä¸ºæ¨¡å‹è®­ç»ƒéœ€è¦æµ·é‡æ•°æ®å’Œå¼ºå¤§ç®—åŠ›ï¼ˆé€šå¸¸æ˜¯GPUï¼‰ï¼Œè€Œç»ˆç«¯è®¾å¤‡èµ„æºæå…¶æœ‰é™ï¼Œåªè´Ÿè´£æ‰§è¡Œï¼ˆæ¨ç†ï¼‰å·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸»è¦åŒ…å«**å››ä¸ªå…³é”®é˜¶æ®µ**ï¼š

1. **æ¨¡å‹è®­ç»ƒ (Training)**: åœ¨PCä¸Šï¼Œä½¿ç”¨TensorFlow/Kerasç­‰æ¡†æ¶ï¼Œæ„å»ºä¸€ä¸ªç¥ç»ç½‘ç»œå¹¶ç”¨æ•°æ®é›†è¿›è¡Œè®­ç»ƒï¼Œä½¿å…¶å­¦ä¼šç‰¹å®šä»»åŠ¡ã€‚
2. **æ¨¡å‹è½¬æ¢ (Conversion)**: å°†åŒ…å«è®­ç»ƒä¿¡æ¯çš„åºå¤§Kerasæ¨¡å‹ï¼Œè½¬æ¢ä¸ºä¸€ä¸ªåªåŒ…å«æ¨ç†æ‰€éœ€çš„ã€è½»é‡çº§çš„**.tfliteæ ¼å¼æ–‡ä»¶**ã€‚æ­¤è¿‡ç¨‹ä¼šå‰¥ç¦»æ¢¯åº¦ã€ä¼˜åŒ–å™¨ç­‰è®­ç»ƒä¸“ç”¨ä¿¡æ¯ã€‚
3. **æ¨¡å‹é‡åŒ– (Quantization)**: è¿™æ˜¯**TinyMLçš„æ ¸å¿ƒä¼˜åŒ–æ­¥éª¤**ã€‚å®ƒå°†æ¨¡å‹ä¸­åŸæœ¬ç”¨**32ä½æµ®ç‚¹æ•°(FP32)**è¡¨ç¤ºçš„æƒé‡å’Œè®¡ç®—è¿‡ç¨‹ï¼Œè½¬æ¢ä¸º**8ä½æ•´æ•°(INT8)**ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼šæ¨¡å‹ä½“ç§¯å¯ç¼©å°çº¦4å€ï¼Œå¹¶ä¸”åœ¨åªæ“…é•¿æ•´æ•°è¿ç®—çš„MCUä¸Šï¼Œæ¨ç†é€Ÿåº¦å¯æå‡æ•°å€ï¼ŒåŒæ—¶åŠŸè€—æ˜¾è‘—é™ä½ã€‚
4. **Cæ•°ç»„è½¬æ¢ (C Array Conversion)**: ç”±äºMCUé€šå¸¸æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œæ— æ³•åƒPCä¸€æ ·è¯»å–æ–‡ä»¶ã€‚å› æ­¤ï¼Œéœ€è¦å°†é‡åŒ–åçš„.tfliteæ¨¡å‹æ–‡ä»¶è½¬æ¢ä¸ºä¸€ä¸ª**Cè¯­è¨€çš„unsigned charæ•°ç»„**ã€‚è¿™ä¸ªæ•°ç»„æœ€ç»ˆä¼šä½œä¸ºä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œè¢«ä¸€åŒç¼–è¯‘åˆ°è®¾å¤‡çš„å›ºä»¶ç¨‹åºä¸­ã€‚

ä¸‹é¢çš„ä»£ç å°†å®Œæ•´æ¼”ç¤ºè¿™å››ä¸ªé˜¶æ®µã€‚

#### ä»£ç æ¼”ç¤º

**åœºæ™¯**: è®­ç»ƒä¸€ä¸ªæ¨¡å‹æ¥å­¦ä¹ å¹¶é¢„æµ‹ä¸€ä¸ªåŸºæœ¬çš„æ­£å¼¦æ³¢å‡½æ•°ï¼Œè¿™åœ¨å¤„ç†ä¼ æ„Ÿå™¨å‘¨æœŸæ€§æ•°æ®æ—¶éå¸¸å¸¸è§ã€‚

```python
import tensorflow as tf
import numpy as np
import math
import os

# --- æ•°æ®å‡†å¤‡ ---
# ä¸ºäº†è®©æ¨¡å‹å­¦ä¹ ï¼Œæˆ‘ä»¬å…ˆåˆ›é€ ä¸€äº›æ•°æ®ã€‚
# æƒ³è±¡ä¸€ä¸‹ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä»ä¼ æ„Ÿå™¨æ”¶é›†åˆ°çš„å¸¦æœ‰å™ªå£°çš„å‘¨æœŸæ€§æ•°æ®ã€‚
SAMPLES = 1000
x_values = np.random.uniform(low=0, high=2*math.pi, size=SAMPLES).astype(np.float32)
y_values = np.sin(x_values) + 0.1 * np.random.randn(SAMPLES).astype(np.float32)

# --- é˜¶æ®µ1ï¼šæ¨¡å‹è®­ç»ƒ ---
# æˆ‘ä»¬æ¥æ­å»ºä¸€ä¸ªç®€å•çš„"å¤§è„‘"ï¼ˆç¥ç»ç½‘ç»œï¼‰ï¼Œå®ƒæœ‰ä¸‰ä¸ª"æ€è€ƒå±‚"ã€‚
model = tf.keras.Sequential([
   tf.keras.layers.Dense(8, activation='relu', input_shape=[1]), # ç¬¬1å±‚ï¼šæ¥æ”¶1ä¸ªè¾“å…¥ï¼Œæœ‰8ä¸ªç¥ç»å…ƒ
   tf.keras.layers.Dense(8, activation='relu'),                     # ç¬¬2å±‚ï¼šæœ‰8ä¸ªç¥ç»å…ƒ
   tf.keras.layers.Dense(1)                                       # ç¬¬3å±‚ï¼šè¾“å‡º1ä¸ªç»“æœ
])

# å‘Šè¯‰"å¤§è„‘"å­¦ä¹ çš„ç›®æ ‡å’Œæ–¹æ³•
model.compile(optimizer='adam', loss='mean_squared_error')

# å¼€å§‹å­¦ä¹ ï¼è®©æ¨¡å‹åå¤çœ‹è¿™äº›æ•°æ®50éï¼ˆepochs=50ï¼‰ï¼Œå°è¯•æ‰¾åˆ°xå’Œyçš„å…³ç³»ã€‚
print(">>> é˜¶æ®µ1ï¼šå¼€å§‹è®­ç»ƒæ¨¡å‹...")
model.fit(x_values, y_values, epochs=50)
print(">>> æ¨¡å‹è®­ç»ƒå®Œæˆï¼")

# --- é˜¶æ®µ2ï¼šæ¨¡å‹è½¬æ¢ (Keras -> TFLite) ---
# è®­ç»ƒå¥½çš„æ¨¡å‹åƒä¸€æœ¬åšåšçš„æ•™ç§‘ä¹¦ï¼ŒåŒ…å«äº†å¤ªå¤šç¬”è®°ï¼ˆè®­ç»ƒä¿¡æ¯ï¼‰ã€‚
# æˆ‘ä»¬ç°åœ¨éœ€è¦æŠŠå®ƒç²¾ç®€æˆä¸€å¼ "é€ŸæŸ¥è¡¨"ï¼Œæ–¹ä¾¿åœ¨å¾®å°çš„è®¾å¤‡ä¸Šä½¿ç”¨ã€‚
print("\n>>> é˜¶æ®µ2ï¼šå°†æ¨¡å‹è½¬æ¢ä¸º TFLite æ ¼å¼...")
converter = tf.lite.TFLiteConverter.from_keras_model(model)
tflite_model = converter.convert()

# å°†"é€ŸæŸ¥è¡¨"ä¿å­˜ä¸ºæ–‡ä»¶
with open("sine_model.tflite", 'wb') as f:
   f.write(tflite_model)
print(">>> æ ‡å‡† TFLite æ¨¡å‹å·²ä¿å­˜ã€‚")

# --- é˜¶æ®µ3ï¼šæ¨¡å‹é‡åŒ– (FP32 -> INT8) ---
# ä¸ºäº†è®©æ¨¡å‹æ›´å°ã€æ›´å¿«ï¼Œæˆ‘ä»¬è¿›è¡Œ"é‡åŒ–"ã€‚
# å°±åƒæŠŠç²¾ç¡®åˆ°å°æ•°ç‚¹åå¾ˆå¤šä½çš„å°æ•°ï¼Œè¿‘ä¼¼æˆæ•´æ•°ä¸€æ ·ã€‚
# è¿™ä¼šè®©æ¨¡å‹ä½“ç§¯ç¼©å°4å€ï¼Œå¹¶ä¸”åœ¨MCUä¸Šè·‘å¾—é£å¿«ã€‚
print("\n>>> é˜¶æ®µ3ï¼šå¯¹æ¨¡å‹è¿›è¡Œ INT8 é‡åŒ–...")
def representative_data_gen():
   for i in range(100):
       yield [x_values[i:i+1]]

converter.optimizations = [tf.lite.Optimize.DEFAULT]
converter.representative_dataset = representative_data_gen
converter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS_INT8]
converter.inference_input_type = tf.int8
converter.inference_output_type = tf.int8

tflite_quant_model = converter.convert()

with open("sine_model_quant.tflite", 'wb') as f:
   f.write(tflite_quant_model)
print(">>> é‡åŒ–åçš„ TFLite æ¨¡å‹å·²ä¿å­˜ã€‚")
print(f"åŸå§‹æ¨¡å‹å¤§å°: {os.path.getsize('sine_model.tflite')} å­—èŠ‚")
print(f"é‡åŒ–åæ¨¡å‹å¤§å°: {os.path.getsize('sine_model_quant.tflite')} å­—èŠ‚")

# --- é˜¶æ®µ4ï¼šè½¬æ¢ä¸ºCè¯­è¨€æ•°ç»„ ---
# å¾®æ§åˆ¶å™¨(MCU)é€šå¸¸æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œä¸èƒ½ç›´æ¥è¯»å–.tfliteæ–‡ä»¶ã€‚
# æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ¨¡å‹æ–‡ä»¶å˜æˆCè¯­è¨€ä»£ç é‡Œçš„ä¸€é•¿ä¸²æ•°å­—ï¼ˆæ•°ç»„ï¼‰ã€‚
print("\n>>> é˜¶æ®µ4ï¼šå°†æ¨¡å‹æ–‡ä»¶è½¬æ¢ä¸º C è¯­è¨€æ•°ç»„...")
os.system(f"xxd -i sine_model_quant.tflite > sine_model.h")
print(">>> æ¨¡å‹å·²è½¬æ¢ä¸º C å¤´æ–‡ä»¶ 'sine_model.h'ï¼Œç°åœ¨å¯ä»¥æŠŠå®ƒç”¨åœ¨ä½ çš„MCUé¡¹ç›®é‡Œäº†ï¼")
```

---

## ç¬¬ä¸‰ç« ï¼šAIäº¤äº’çš„è¿›åŒ–ï¼ˆä»£ç ä¸å®ç°æ·±åº¦è§£æï¼‰

æœ¬ç« æ—¨åœ¨é€šè¿‡å…·ä½“çš„ä»£ç ç¤ºä¾‹ï¼Œæ·±å…¥å±•ç¤ºFunction Callingã€MCPå’ŒA2Aåè®®åœ¨æŠ€æœ¯å®ç°ä¸Šçš„æ ¸å¿ƒæ€æƒ³ä¸å·®å¼‚ã€‚

### 3.1 å±‚æ¬¡ä¸€ï¼šFunction Calling - è®©AIæ‹¥æœ‰"æ‰‹è„š"

#### ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Function Callingï¼Ÿ

1. **æ‰“ç ´æ•°å­—ç‰¢ç¬¼**: å¦‚æœæ²¡æœ‰Function Callingï¼Œ**LLM**å°±åƒä¸€ä¸ªè¢«å…³åœ¨ç¬¼å­é‡Œçš„èªæ˜å¤§è„‘ï¼Œå®ƒåªèƒ½åŸºäºè¿‡æ—¶çš„ã€é™æ€çš„è®­ç»ƒæ•°æ®è¿›è¡Œå¯¹è¯ã€‚å®ƒæ— æ³•çŸ¥é“"ä»Šå¤©"çš„å¤©æ°”ï¼Œä¹Ÿæ— æ³•ä¸ºä½ "é¢„è®¢"ä¸€å¼ æœºç¥¨ã€‚**Function Callingç»™äº†è¿™ä¸ªå¤§è„‘è¿æ¥çœŸå®ä¸–ç•Œçš„"æ‰‹å’Œè„š"**ã€‚
2. **è·å–å®æ—¶ã€å‡†ç¡®çš„æ•°æ®**: è§£å†³LLMçš„**"çŸ¥è¯†æˆªæ­¢"é—®é¢˜**ï¼Œä½¿å…¶èƒ½å¤Ÿé€šè¿‡è°ƒç”¨APIæ¥è·å–æœ€æ–°çš„è‚¡ç¥¨ä»·æ ¼ã€æ–°é—»å¤´æ¡æˆ–ä»»ä½•å®æ—¶å˜åŒ–çš„å¤–éƒ¨ä¿¡æ¯ï¼Œä¿è¯äº†å›ç­”çš„æ—¶æ•ˆæ€§å’Œå‡†ç¡®æ€§ã€‚
3. **æ‰§è¡ŒçœŸå®ä¸–ç•Œçš„åŠ¨ä½œ**: è®©LLMä»ä¸€ä¸ªä¿¡æ¯æä¾›è€…ï¼Œè½¬å˜ä¸ºä¸€ä¸ª**è¡ŒåŠ¨æ‰§è¡Œè€…**ã€‚ç”¨æˆ·å¯ä»¥ç”¨è‡ªç„¶è¯­è¨€å‘½ä»¤å®ƒå‘é€é‚®ä»¶ã€åˆ›å»ºæ—¥å†äº‹ä»¶ã€æ§åˆ¶æ™ºèƒ½å®¶å±…è®¾å¤‡ç­‰ã€‚
4. **å®ç°å¯é çš„ç³»ç»Ÿé›†æˆ**: å®ƒæ˜¯å¼€å‘è€…å°†LLMé›†æˆåˆ°ç°æœ‰è½¯ä»¶åº”ç”¨ä¸­çš„æœ€å¯é æ–¹å¼ã€‚é€šè¿‡å¼ºåˆ¶LLMè¾“å‡º**ä¸¥æ ¼çš„JSONæ ¼å¼**ï¼Œå®ƒæ¶ˆé™¤äº†å¯¹LLMè‡ªç„¶è¯­è¨€è¾“å‡ºè¿›è¡Œç¹çã€æ˜“é”™çš„æ–‡æœ¬è§£æçš„éœ€è¦ï¼Œè®©AIé©±åŠ¨çš„åº”ç”¨æ›´åŠ ç¨³å®šå’Œå¥å£®ã€‚

#### åŸç†ä»‹ç»

**å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰**æœ¬èº«æ˜¯ä¸€ä¸ªå°é—­çš„"æ•°å­—å¤§è„‘"ï¼Œå®ƒæ— æ³•æ„ŸçŸ¥å®æ—¶ä¿¡æ¯ï¼Œä¹Ÿæ— æ³•åœ¨å¤–éƒ¨ä¸–ç•Œæ‰§è¡Œæ“ä½œã€‚**Function Callingæ˜¯è¿æ¥è¿™ä¸ª"å¤§è„‘"ä¸"ç°å®ä¸–ç•Œ"çš„æ¡¥æ¢**ã€‚å…¶æ ¸å¿ƒåŸç†æ˜¯ä¸€ä¸ª**ç»“æ„åŒ–çš„åŒå‘APIé€šä¿¡å¾ªç¯**ï¼š

1. **æ„å›¾è¯†åˆ«**: LLMæ¥æ”¶åˆ°ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€è¯·æ±‚åï¼Œä¸å†ç›´æ¥ç”Ÿæˆå›ç­”ï¼Œè€Œæ˜¯åƒä¸€ä¸ªèªæ˜çš„è°ƒåº¦å‘˜ï¼Œåˆ†æç”¨æˆ·çš„çœŸå®æ„å›¾ã€‚
2. **å·¥å…·é€‰æ‹©ä¸å‚æ•°æå–**: å¦‚æœæ„å›¾éœ€è¦å¤–éƒ¨ä¿¡æ¯æˆ–åŠ¨ä½œï¼ŒLLMä¼šä»å¼€å‘è€…é¢„å…ˆæä¾›çš„"å·¥å…·æ¸…å•"ï¼ˆ**JSON Schemaæ ¼å¼çš„å‡½æ•°æè¿°**ï¼‰ä¸­ï¼Œé€‰æ‹©æœ€åŒ¹é…çš„å·¥å…·ï¼Œå¹¶ä»ç”¨æˆ·çš„è¯è¯­ä¸­å‡†ç¡®åœ°æå–å‡ºè°ƒç”¨è¯¥å·¥å…·æ‰€éœ€çš„å‚æ•°ã€‚
3. **ç»“æ„åŒ–è¾“å‡º**: LLMç”Ÿæˆä¸€ä¸ªåŒ…å«å·¥å…·åç§°å’Œå‚æ•°çš„ã€**ä¸¥æ ¼çš„JSONæ ¼å¼çš„è°ƒç”¨è¯·æ±‚**ï¼Œè€Œä¸æ˜¯ä¸€å¥æ¨¡ç³Šçš„è¯ã€‚
4. **å¤–éƒ¨æ‰§è¡Œä¸ç»“æœåé¦ˆ**: å¼€å‘è€…åº”ç”¨æ¥æ”¶åˆ°è¿™ä¸ªJSONåï¼Œæ‰§è¡Œç›¸åº”çš„æœ¬åœ°å‡½æ•°ï¼ˆå¦‚è°ƒç”¨å¤©æ°”APIï¼‰ï¼Œç„¶åå°†å‡½æ•°çš„æ‰§è¡Œç»“æœå†æ¬¡å‘é€ç»™LLMã€‚
5. **æ€»ç»“ç”Ÿæˆ**: LLMåœ¨è·å¾—äº†çœŸå®æ•°æ®åï¼Œæœ€ç»ˆç”¨è‡ªç„¶è¯­è¨€æ€»ç»“ä¿¡æ¯å¹¶å›å¤ç”¨æˆ·ã€‚

è¿™ä¸ªæœºåˆ¶å°†LLMä»ä¸€ä¸ª**"èŠå¤©æœºå™¨äºº"è½¬å˜ä¸ºä¸€ä¸ªèƒ½é©±åŠ¨è½¯ä»¶çš„"æ¨ç†å¼•æ“"**ã€‚

#### ä»£ç æ¼”ç¤º

**åœºæ™¯**: åˆ›å»ºä¸€ä¸ªèƒ½æŸ¥è¯¢å½“å‰å¤©æ°”çš„ç®€å•AIåŠ©æ‰‹ã€‚

```python
import json

# --- ç¬¬1æ­¥ï¼šå®šä¹‰ä½ çš„"å·¥å…·" ---
# è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„Pythonå‡½æ•°ï¼Œå®ƒå¯ä»¥åšä»»ä½•äº‹ï¼Œæ¯”å¦‚è°ƒç”¨ä¸€ä¸ªçœŸæ­£çš„å¤©æ°”APIã€‚
def get_current_weather(location: str):
   """è·å–æŒ‡å®šåœ°ç‚¹çš„å½“å‰å¤©æ°”ä¿¡æ¯"""
   print(f"--- æ­£åœ¨æ‰§è¡Œå·¥å…·: get_current_weather(åœ°ç‚¹='{location}') ---")
   # æ¨¡æ‹Ÿè¿”å›ç»“æœ
   weather_info = {"temperature": "28", "condition": "å¤šäº‘"}
   return json.dumps(weather_info)

# --- ç¬¬2æ­¥ï¼šå‘LLM"ä»‹ç»"ä½ çš„å·¥å…· ---
# æˆ‘ä»¬ç”¨ä¸€ä¸ªç‰¹å®šçš„æ ¼å¼å‘Šè¯‰LLMæˆ‘ä»¬æœ‰ä¸€ä¸ªå«'get_current_weather'çš„å·¥å…·ã€‚
tools_schema_for_llm = [
   {
       "type": "function",
       "function": {
           "name": "get_current_weather",
           "description": "è·å–ä¸€ä¸ªæŒ‡å®šåœ°ç‚¹çš„å½“å‰å¤©æ°”",
           "parameters": {
               "type": "object",
               "properties": {
                   "location": {"type": "string", "description": "åŸå¸‚å, e.g., æˆéƒ½"},
               },
               "required": ["location"],
           },
       }
   }
]

# --- ç¬¬3æ­¥ï¼šä¸LLMè¿›è¡Œäº¤äº’ ---
# ä¼ªä»£ç ï¼Œæ¼”ç¤ºæ ¸å¿ƒäº¤äº’é€»è¾‘
def weather_assistant(user_prompt: str):
   print(f"ğŸ‘¤ ç”¨æˆ·: {user_prompt}")
   
   # å¯¹è¯å†å²ï¼Œåˆå§‹åªæœ‰ç”¨æˆ·çš„é—®é¢˜
   messages = [{"role": "user", "content": user_prompt}]
   
   # ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šæŠŠé—®é¢˜å’Œå·¥å…·ä»‹ç»éƒ½å‘ç»™LLM
   # llm_response = call_llm_api(messages, tools=tools_schema_for_llm)
   
   # --- æ¨¡æ‹ŸLLMçš„ç¬¬ä¸€æ¬¡è¿”å› ---
   # LLMåˆ†æåï¼Œå‘ç°è‡ªå·±ä¸çŸ¥é“å¤©æ°”ï¼Œä½†å®ƒçœ‹åˆ°äº†æˆ‘ä»¬ç»™çš„å·¥å…·ï¼Œ
   # äºæ˜¯å†³å®šè¯·æ±‚æˆ‘ä»¬å»è°ƒç”¨è¿™ä¸ªå·¥å…·ã€‚
   llm_response = {
       "role": "assistant",
       "tool_calls": [{
           "id": "call_12345", "type": "function",
           "function": {"name": "get_current_weather", "arguments": '{"location": "æˆéƒ½"}'}
       }]
   }
   print(f"ğŸ¤– LLM å†³ç­–: æˆ‘ä¸çŸ¥é“å¤©æ°”ï¼Œä½†æˆ‘å¯ä»¥è°ƒç”¨å·¥å…·ã€‚è¯·æ±‚ -> {llm_response['tool_calls']}")
   # --- æ¨¡æ‹Ÿç»“æŸ ---
   
   tool_calls = llm_response.get("tool_calls")
   if tool_calls:
       # å°†LLMçš„"è°ƒç”¨è¯·æ±‚"å­˜å…¥å†å²
       messages.append(llm_response)
       
       # æ‰§è¡ŒLLMè¯·æ±‚çš„å·¥å…·
       tool_call = tool_calls[0] # ç²¾ç®€ç¤ºä¾‹ï¼Œåªå¤„ç†ç¬¬ä¸€ä¸ªå·¥å…·è°ƒç”¨
       function_name = tool_call["function"]["name"]
       function_args = json.loads(tool_call["function"]["arguments"])
       
       # è°ƒç”¨æˆ‘ä»¬æœ¬åœ°çš„çœŸå®å‡½æ•°
       tool_output = get_current_weather(**function_args)
       
       # å°†å·¥å…·çš„"æ‰§è¡Œç»“æœ"ä¹Ÿå­˜å…¥å†å²
       messages.append({
           "role": "tool",
           "tool_call_id": tool_call["id"],
           "name": function_name,
           "content": tool_output,
       })
       
       # ç¬¬äºŒæ¬¡è¯·æ±‚ï¼šæŠŠåŒ…å«äº†å·¥å…·ç»“æœçš„å®Œæ•´å†å²å†æ¬¡å‘ç»™LLM
       # final_response = call_llm_api(messages, tools=tools_schema_for_llm)
       
       # --- æ¨¡æ‹ŸLLMçš„ç¬¬äºŒæ¬¡è¿”å› ---
       # è¿™ä¸€æ¬¡ï¼ŒLLMçœ‹åˆ°äº†å¤©æ°”ç»“æœï¼Œäºæ˜¯ç”¨è‡ªç„¶è¯­è¨€æ€»ç»“å¹¶å›ç­”
       final_response = {"role": "assistant", "content": "ä»Šå¤©æˆéƒ½çš„å¤©æ°”æ˜¯å¤šäº‘ï¼Œæ¸©åº¦ä¸º28æ‘„æ°åº¦ã€‚"}
       print(f"ğŸ¤– LLM æ€»ç»“å›ç­”: {final_response['content']}")
       # --- æ¨¡æ‹Ÿç»“æŸ ---

# --- è¿è¡Œç¤ºä¾‹ ---
weather_assistant("ä»Šå¤©æˆéƒ½å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ")
```

### 3.2 å±‚æ¬¡äºŒï¼šModel Context Protocol (MCP) - æ›´æ¸…æ™°çš„"è¯­æ³•"

#### ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MCPï¼Ÿ

1. **è§£å†³"æç¤ºè¯å¤§æ‚çƒ©"é—®é¢˜**: ç›®å‰çš„æ™®éåšæ³•æ˜¯å°†ç³»ç»ŸæŒ‡ä»¤ã€ç”¨æˆ·å†å²ã€æ£€ç´¢çŸ¥è¯†ã€å·¥å…·æè¿°ç­‰æ‰€æœ‰ä¿¡æ¯æ‹¼æ¥æˆä¸€ä¸ªé•¿å­—ç¬¦ä¸²Promptã€‚è¿™ç§æ–¹å¼å°±åƒä¸€ä¸ª**"åƒåœ¾æŠ½å±‰"**ï¼Œä¿¡æ¯æ··æ‚ã€ç»“æ„æ··ä¹±ã€‚**MCPæ—¨åœ¨ç”¨ä¸€ä¸ªæ¸…æ™°ã€è§„æ•´çš„"å¤‡èœç›’"æ¥å–ä»£å®ƒ**ã€‚
2. **æå‡æ¨¡å‹çš„ç†è§£åŠ›ä¸æ•ˆç‡**: å½“ä¸Šä¸‹æ–‡è¢«**ç»“æ„åŒ–åœ°å‘ˆç°**æ—¶ï¼Œæ¨¡å‹æ— éœ€å†è€—è´¹ç®—åŠ›å»çŒœæµ‹"å“ªéƒ¨åˆ†æ˜¯æŒ‡ä»¤ï¼Œå“ªéƒ¨åˆ†æ˜¯å‚è€ƒèµ„æ–™"ã€‚è¿™ç§æ¸…æ™°çš„è¾“å…¥èƒ½å‡å°‘æ¨¡å‹çš„æ­§ä¹‰å’Œå¹»è§‰ï¼Œå¹¶å¯èƒ½å› ä¸ºå‡å°‘äº†è§£æå¼€é”€è€Œæå‡å“åº”é€Ÿåº¦ã€é™ä½æˆæœ¬ã€‚
3. **å¢å¼ºè¾“å‡ºçš„å¯é æ€§**: é€šè¿‡ä¸€ä¸ªä¸“é—¨çš„**output_formatå­—æ®µ**ï¼Œå¼€å‘è€…å¯ä»¥å¼ºåˆ¶æ¨¡å‹ä»¥ç‰¹å®šçš„JSON Schemaè¾“å‡ºï¼Œè¿™æ¯”åœ¨Promptä¸­ç”¨è‡ªç„¶è¯­è¨€æè¿°è¦å¯é å¾—å¤šï¼Œæ˜¯å®ç°ç¨³å®šAIå·¥ä½œæµçš„å…³é”®ã€‚
4. **è®©AIå¼€å‘ä»"è‰ºæœ¯"èµ°å‘"å·¥ç¨‹"**: MCPç”¨ä¸€ä¸ª**æ ‡å‡†åŒ–çš„å·¥ç¨‹åè®®**ï¼Œå–ä»£äº†å……æ»¡"ç„å­¦"çš„æç¤ºè¯å·¥ç¨‹ã€‚è¿™ä½¿å¾—AIåº”ç”¨çš„å¼€å‘è¿‡ç¨‹æ›´åŠ ç§‘å­¦ã€å¯å¤ç°å’Œå¯ç»´æŠ¤ã€‚

#### åŸç†ä»‹ç»

**MCP**æ˜¯ä¸€ä¸ªå‰ç»æ€§çš„æè®®ï¼Œæ—¨åœ¨è§£å†³å½“å‰**Promptå·¥ç¨‹çš„"æ··ä¹±"é—®é¢˜**ã€‚ç›®å‰ï¼Œå¼€å‘è€…é€šå¸¸å°†ç³»ç»ŸæŒ‡ä»¤ã€ç”¨æˆ·å†å²ã€æ£€ç´¢åˆ°çš„çŸ¥è¯†ï¼ˆRAGï¼‰å’Œå·¥å…·æè¿°ç­‰æ‰€æœ‰ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œé€šè¿‡å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼å¡è¿›ä¸€ä¸ªå•ä¸€çš„è¾“å…¥æµä¸­ã€‚è¿™ç§æ–¹å¼è¢«ç§°ä¸º**"åƒåœ¾æŠ½å±‰"æ¨¡å¼**ï¼Œå®ƒè¿«ä½¿LLMæµªè´¹ç®—åŠ›å»è§£æå’ŒåŒºåˆ†ä¿¡æ¯ç±»å‹ï¼Œä¸”å®¹æ˜“å¯¼è‡´æ··æ·†ã€‚

MCPçš„æ ¸å¿ƒåŸç†æ˜¯**ä»éç»“æ„åŒ–åˆ°ç»“æ„åŒ–çš„è½¬å˜**ã€‚å®ƒæè®®ï¼Œä¸LLMçš„é€šä¿¡åº”è¯¥åƒç°ä»£ç½‘ç»œåè®®ï¼ˆå¦‚HTTPï¼‰ä¸€æ ·ï¼Œæ‹¥æœ‰ä¸€ä¸ª**æ ‡å‡†åŒ–çš„ã€å¤šå­—æ®µçš„ç»“æ„**ã€‚æ¯ä¸ªå­—æ®µéƒ½æœ‰æ˜ç¡®çš„è¯­ä¹‰ï¼Œå¦‚**system_promptç”¨äºæŒ‡ä»¤**ï¼Œ**retrievalç”¨äºå­˜æ”¾æ£€ç´¢åˆ°çš„çŸ¥è¯†**ï¼Œ**toolsç”¨äºå­˜æ”¾å‡½æ•°å®šä¹‰**ã€‚è¿™ç§**"å„å½’å…¶ä½"çš„æ–¹å¼**ï¼Œèƒ½è®©LLMåœ¨æ¥æ”¶ä¿¡æ¯çš„ç¬é—´å°±æ¸…æ™°åœ°ç†è§£ä¸Šä¸‹æ–‡ï¼Œä»è€Œæ›´é«˜æ•ˆã€æ›´å¯é åœ°æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶å°†**"æç¤ºè¯å·¥ç¨‹"è¿™ç§"è‰ºæœ¯"è½¬å˜ä¸ºæ›´å…·ç¡®å®šæ€§çš„"ä¸Šä¸‹æ–‡å·¥ç¨‹"**ã€‚

#### ä»£ç æ¼”ç¤º

> âš ï¸ **æ³¨æ„**: ä»¥ä¸‹ä»£ç æ— æ³•å®é™…è¿è¡Œï¼Œå®ƒä»…ç”¨äºå±•ç¤ºMCPçš„æ ¸å¿ƒæ€æƒ³ã€‚

**åœºæ™¯**: æ—…è¡ŒåŠ©æ‰‹éœ€è¦ç»“åˆç”¨æˆ·çš„ä¸ªäººåå¥½ï¼ˆRAGæ£€ç´¢æ‰€å¾—ï¼‰æ¥å›ç­”é—®é¢˜ï¼Œå¹¶è¢«è¦æ±‚ä»¥ç‰¹å®šJSONæ ¼å¼è¿”å›ç­”æ¡ˆã€‚

```python
import json

def build_mcp_request(user_prompt: str):
   # æ¨¡æ‹Ÿä»æ•°æ®åº“æ£€ç´¢åˆ°çš„ç”¨æˆ·ä¿¡æ¯ (RAG)
   retrieved_user_profile = { "membership_level": "Gold", "preferences": { "seat": "window" } }
   
   # è®¾æƒ³ä¸­çš„MCPè¯·æ±‚ä½“æ˜¯ä¸€ä¸ªPythonå­—å…¸ï¼Œæ¯ä¸ªé”®éƒ½æœ‰æ˜ç¡®çš„å«ä¹‰
   mcp_request_body = {
       # 'system_prompt': å‘Šè¯‰AIå®ƒçš„è§’è‰²æ˜¯ä»€ä¹ˆã€‚
       "system_prompt": "ä½ æ˜¯ä¸€ä¸ªå‹å¥½ä¸”é«˜æ•ˆçš„æ—…è¡Œè§„åˆ’åŠ©æ‰‹ã€‚",
       
       # 'user_prompt': ç”¨æˆ·è¿™æ¬¡å…·ä½“è¯´äº†ä»€ä¹ˆã€‚
       "user_prompt": user_prompt,
       
       # 'history': è¿‡å»çš„å¯¹è¯ï¼Œè®©AIè®°ä½ä¸Šä¸‹æ–‡ã€‚
       "history": [{"role": "user", "content": "ä¸Šå‘¨çš„æœºç¥¨è®¢å•å¤„ç†å¾—æ€ä¹ˆæ ·äº†ï¼Ÿ"}],
       
       # 'tools': AIå¯ä»¥ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨ï¼ˆå³Function Callingçš„å®šä¹‰ï¼‰ã€‚
       "tools": tools_schema_for_llm, # å¤ç”¨ä¹‹å‰ä¸ºå¤©æ°”åŠ©æ‰‹å®šä¹‰çš„å·¥å…·
       
       # 'retrieval': ä»å¤–éƒ¨çŸ¥è¯†åº“æ£€ç´¢åˆ°çš„ä¿¡æ¯ï¼Œå¸®åŠ©AIå›ç­”é—®é¢˜ã€‚
       "retrieval": [
           { "source": "db://user_profiles/user123", "content": json.dumps(retrieved_user_profile) }
       ],
       
       # 'output_format': å¼ºåˆ¶è¦æ±‚AIå¿…é¡»æŒ‰ç…§è¿™ä¸ªJSONæ ¼å¼æ¥å›ç­”ã€‚
       "output_format": {
           "type": "object",
           "properties": { 
               "summary": {"type": "string", "description": "ç”¨ä¸€å¥è¯æ€»ç»“ç»™ç”¨æˆ·çš„å›å¤"}, 
               "status": {"type": "string", "description": "ä»»åŠ¡çŠ¶æ€, e.g., 'completed'"}
           },
           "required": ["summary", "status"]
       }
   }

   print("--- è®¾æƒ³ä¸­çš„MCPè¯·æ±‚ä½“ (JSON)ï¼Œä¿¡æ¯è¢«æ¸…æ™°åœ°ç»„ç»‡èµ·æ¥ ---")
   print(json.dumps(mcp_request_body, indent=2, ensure_ascii=False))

# --- è¿è¡Œç¤ºä¾‹ ---
build_mcp_request("æˆ‘éœ€è¦å»æˆéƒ½ï¼Œå¸®æˆ‘çœ‹çœ‹å¤©æ°”ã€‚")
```

### 3.3 å±‚æ¬¡ä¸‰ï¼šAgent-to-Agent (A2A) åè®® - æ„å»º"AIç¤¾ä¼š"

#### ä¸ºä»€ä¹ˆè¦ä½¿ç”¨A2Aåè®®ï¼Ÿ

1. **è§£å†³å¤æ‚é—®é¢˜**: ç°å®ä¸–ç•Œä¸­çš„å¤æ‚é—®é¢˜ï¼ˆå¦‚"åˆ›åŠä¸€å®¶å…¬å¸"ï¼‰æ— æ³•ç”±ä»»ä½•ä¸€ä¸ªå•ä¸€çš„AIæ¨¡å‹è§£å†³ã€‚è¿™éœ€è¦ä¸åŒé¢†åŸŸçš„**"ä¸“å®¶AI"è¿›è¡Œåˆ†å·¥åä½œ**ã€‚**A2Aåè®®å°±æ˜¯è®©è¿™äº›ä¸“å®¶Agentèƒ½å¤Ÿç»„æˆ"é¡¹ç›®å›¢é˜Ÿ"çš„ç»„ç»‡å’Œæ²Ÿé€šå‡†åˆ™**ã€‚
2. **æ‰“ç ´AIç”Ÿæ€å­¤å²›**: å¦‚æœæ²¡æœ‰ç»Ÿä¸€çš„åè®®ï¼Œæ¯ä¸ªå…¬å¸æˆ–å¼€å‘è€…æ„å»ºçš„Agentéƒ½å°†æ˜¯ä¸€ä¸ªæ— æ³•ä¸å¤–ç•Œäº¤æµçš„"å­¤å²›"ï¼Œæ•´ä¸ªAIç”Ÿæ€å°†æ˜¯ç¢ç‰‡åŒ–çš„ã€‚**A2Aåè®®æ—¨åœ¨å»ºç«‹ä¸€ä¸ªé€šç”¨çš„"AIäº’è”ç½‘"**ï¼Œè®©æ‰€æœ‰Agentéƒ½èƒ½äº’è”äº’é€šã€‚
3. **ä¿ƒè¿›ä¸“ä¸šåŒ–ä¸å»ä¸­å¿ƒåŒ–**: A2Aåè®®å…è®¸å¼€å‘è€…æ„å»º**å°è€Œç²¾çš„ä¸“ä¸šAgent**ï¼Œè€Œä¸æ˜¯è¿½æ±‚å¤§è€Œå…¨çš„"ä¸‡èƒ½"Agentã€‚è¿™äº›ä¸“ä¸šAgentå¯ä»¥åœ¨ä¸€ä¸ªå¼€æ”¾çš„å¸‚åœºä¸­æä¾›æœåŠ¡ï¼Œå½¢æˆä¸€ä¸ªæ›´åŠ å¥å£®ã€é«˜æ•ˆå’Œå»ä¸­å¿ƒåŒ–çš„**AIç»æµä½“**ã€‚
4. **é‡Šæ”¾ç¾¤ä½“æ™ºèƒ½çš„æ½œåŠ›**: å°±åƒå•ä¸ªèš‚èšèƒ½åŠ›æœ‰é™ï¼Œä½†èšç¾¤å¯ä»¥æ„å»ºå¤æ‚çš„å·¢ç©´ä¸€æ ·ã€‚**A2Aåè®®æ˜¯é‡Šæ”¾AI"ç¾¤ä½“æ™ºèƒ½"çš„å…³é”®**ï¼Œè®©å¤§é‡Agentçš„ç®€å•äº’åŠ¨èƒ½å¤Ÿæ¶Œç°å‡ºè§£å†³å®å¤§æŒ‘æˆ˜çš„æƒŠäººèƒ½åŠ›ã€‚

#### åŸç†ä»‹ç»

**A2Aåè®®**å°†äº¤äº’çš„ç»´åº¦ä»**"äººä¸AI"æå‡åˆ°äº†"AIä¸AI"**ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯æ„å»ºä¸€ä¸ªèƒ½è®©å¤šä¸ªç‹¬ç«‹çš„ã€è‡ªä¸»çš„**AI Agentè¿›è¡Œæœ‰æ•ˆåä½œ**çš„é€šä¿¡ä¸åä½œæ¡†æ¶ã€‚è¿™ä¸ä»…ä»…æ˜¯å®šä¹‰æ¶ˆæ¯çš„æ ¼å¼ï¼Œæ›´æ˜¯åœ¨å®šä¹‰ä¸€ä¸ªå¾®å‹çš„**"ç¤¾ä¼šä½“ç³»"**ã€‚ä¸€ä¸ªå®Œå¤‡çš„A2Aåè®®é€šå¸¸åŒ…å«ä»¥ä¸‹è¦ç´ ï¼š

1. **é€šä¿¡è¯­è¨€**: å®šä¹‰äº†æ¶ˆæ¯çš„åŸºæœ¬ç»“æ„å’Œ**"è¨€è¯­è¡Œä¸ºï¼ˆPerformativeï¼‰"**ã€‚è¨€è¯­è¡Œä¸ºæ˜ç¡®äº†æ¶ˆæ¯çš„æ„å›¾ï¼Œä¾‹å¦‚æ˜¯**REQUESTï¼ˆè¯·æ±‚ï¼‰**ã€**INFORMï¼ˆå‘ŠçŸ¥ï¼‰**ã€**AGREEï¼ˆåŒæ„ï¼‰**è¿˜æ˜¯**QUERYï¼ˆæŸ¥è¯¢ï¼‰**ã€‚
2. **å†…å®¹è¯­è¨€ä¸æœ¬ä½“**: å®šä¹‰äº†æ¶ˆæ¯ä½“ä¸­å…·ä½“"çŸ¥è¯†"å’Œ"æ•°æ®"çš„è¡¨è¾¾æ–¹å¼ï¼Œç¡®ä¿ä¸åŒAgentå¯¹åŒä¸€ä¸ªæ¦‚å¿µï¼ˆå¦‚"æœºç¥¨è®¢å•"ï¼‰æœ‰å…±åŒçš„ç†è§£ã€‚
3. **äº¤äº’æ¨¡å¼**: å®šä¹‰äº†å®Œæˆç‰¹å®šä»»åŠ¡çš„æ ‡å‡†å¯¹è¯æµç¨‹ï¼Œå¦‚**"è¯·æ±‚-å“åº”"æ¨¡å¼**ã€**"åˆåŒç½‘"æ¨¡å¼**ï¼ˆä»»åŠ¡å‘å¸ƒ-ç«æ ‡-ä¸­æ ‡-æ‰§è¡Œï¼‰ç­‰ã€‚
4. **ç³»ç»ŸæœåŠ¡**: åŒ…æ‹¬ä¸€ä¸ª**"é»„é¡µ"æœåŠ¡**ï¼ˆè®©Agentèƒ½å‘ç°å½¼æ­¤ï¼‰å’Œä¸€ä¸ª**"ä¿¡ä»»ä¸å®‰å…¨"æœåŠ¡**ï¼ˆç¡®ä¿é€šä¿¡å®‰å…¨ï¼Œé˜²æ­¢æ¶æ„Agentï¼‰ã€‚

é€šè¿‡è¿™å¥—è§„èŒƒï¼ŒåŸæœ¬å­¤ç«‹çš„Agentå¯ä»¥ç»„æˆä¸€ä¸ª**åŠ¨æ€çš„ã€åˆ†å¸ƒå¼çš„ç³»ç»Ÿ**ï¼Œå…±åŒè§£å†³è¿œè¶…å•ä¸ªAgentèƒ½åŠ›çš„å¤æ‚é—®é¢˜ã€‚

#### ä»£ç æ¼”ç¤º

**åœºæ™¯**: ä¸€ä¸ª**PlannerAgentï¼ˆè§„åˆ’ä»£ç†ï¼‰**éœ€è¦å‘ä¸€ä¸ª**WeatherAgentï¼ˆå¤©æ°”ä»£ç†ï¼‰**è¯·æ±‚å¤©æ°”ä¿¡æ¯ã€‚

```python
import json
import uuid
import datetime

# --- WeatherAgentçš„å·¥å…·ç®± (å®ƒè‡ªå·±å†…éƒ¨ä½¿ç”¨çš„) ---
def get_weather_from_api(location: str):
   print(f"--- WeatherAgent æ­£åœ¨æ‰§è¡Œå†…éƒ¨å·¥å…·: get_weather_from_api('{location}') ---")
   return {"temperature": "28", "condition": "å¤šäº‘"}

# --- æ¨¡æ‹Ÿä¸¤ä¸ªç‹¬ç«‹çš„Agent ---

def planner_agent_logic():
   """è¿™ä¸ªAgentè´Ÿè´£è§„åˆ’ï¼Œä½†å®ƒè‡ªå·±ä¸ä¼šæŸ¥å¤©æ°”ã€‚"""
   print("\n--- å¯åŠ¨ PlannerAgent ---")
   
   # 1. PlannerAgentå†³å®šéœ€è¦æˆéƒ½çš„å¤©æ°”ä¿¡æ¯ï¼Œäºæ˜¯å‡†å¤‡å‘WeatherAgentæ±‚åŠ©ã€‚
   # å®ƒéœ€è¦æ„å»ºä¸€ä¸ªç¬¦åˆA2Aåè®®çš„æ¶ˆæ¯ã€‚
   message_to_weather_agent = {
       # æ¶ˆæ¯å¤´ï¼šåŒ…å«è¿™æ¬¡é€šä¿¡çš„"ä¿¡å°"ä¿¡æ¯ã€‚
       "header": {
           "protocol": "A2A-Simple-v1",
           "message_id": str(uuid.uuid4()),        # æ¯æ¡æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ID
           "sender_id": "PlannerAgent_01",         # æˆ‘æ˜¯è°
           "receiver_id": "WeatherAgent_01",       # æˆ‘è¦å‘ç»™è°
           "performative": "REQUEST"               # æˆ‘çš„æ„å›¾æ˜¯"è¯·æ±‚"å¯¹æ–¹åšä¸€ä»¶äº‹
       },
       # æ¶ˆæ¯ä½“ï¼šåŒ…å«å…·ä½“çš„è¯·æ±‚å†…å®¹ã€‚
       "body": {
           "task": "get_current_weather",          # æˆ‘è¯·æ±‚çš„ä»»åŠ¡æ˜¯ä»€ä¹ˆ
           "parameters": {"location": "æˆéƒ½"}      # ä»»åŠ¡éœ€è¦çš„å‚æ•°
       }
   }
   
   print(f"âœ‰ï¸ PlannerAgent å‘é€è¯·æ±‚:\n{json.dumps(message_to_weather_agent, indent=2, ensure_ascii=False)}")
   
   # 2. å‘é€æ¶ˆæ¯ï¼Œå¹¶æ¥æ”¶å›å¤ (è¿™é‡Œç®€åŒ–ä¸ºç›´æ¥å‡½æ•°è°ƒç”¨)
   response = weather_agent_logic(message_to_weather_agent)
   
   # 5. PlannerAgentæ”¶åˆ°äº†å›å¤ï¼Œå¹¶è¿›è¡Œå¤„ç†
   if response["body"]["status"] == "SUCCESS":
       weather_data = response["body"]["data"]
       print(f"âœ… PlannerAgent æ”¶åˆ°æˆåŠŸå›å¤ï¼Œå¤©æ°”æ•°æ®: {weather_data}")
   else:
       print("âŒ PlannerAgent æ”¶åˆ°å¤±è´¥å›å¤ã€‚")

def weather_agent_logic(incoming_message):
   """è¿™ä¸ªAgentæ˜¯å¤©æ°”ä¸“å®¶ï¼Œå®ƒåªè´Ÿè´£æ¥æ”¶è¯·æ±‚å¹¶æä¾›å¤©æ°”æ•°æ®ã€‚"""
   print("\n--- WeatherAgent æ”¶åˆ°æ¶ˆæ¯ ---")
   
   # 3. WeatherAgentè§£ææ”¶åˆ°çš„æ¶ˆæ¯
   header = incoming_message["header"]
   body = incoming_message["body"]
   
   # æ£€æŸ¥æ˜¯ä¸æ˜¯å‘ç»™è‡ªå·±çš„ï¼Œå¹¶ä¸”æ˜¯ä¸æ˜¯ä¸€ä¸ªè¯·æ±‚
   if header["performative"] == "REQUEST" and body["task"] == "get_current_weather":
       # 4. æ˜¯ä¸€ä¸ªå¤©æ°”æŸ¥è¯¢è¯·æ±‚ï¼Œäºæ˜¯å®ƒè°ƒç”¨è‡ªå·±çš„å†…éƒ¨å·¥å…·
       location = body["parameters"]["location"]
       weather_data = get_weather_from_api(location)
       
       # å‡†å¤‡å›å¤æ¶ˆæ¯
       response_message = {
           "header": {
               "protocol": "A2A-Simple-v1",
               "message_id": str(uuid.uuid4()),
               "in_reply_to": header["message_id"], # æŒ‡æ˜è¿™æ˜¯å¯¹å“ªæ¡æ¶ˆæ¯çš„å›å¤
               "sender_id": "WeatherAgent_01",
               "receiver_id": header["sender_id"],
               "performative": "INFORM" # æˆ‘çš„æ„å›¾æ˜¯"å‘ŠçŸ¥"ä¸€ä¸ªç»“æœ
           },
           "body": {
               "status": "SUCCESS",
               "data": weather_data
           }
       }
       print(f"ğŸ“¬ WeatherAgent å‘é€å›å¤:\n{json.dumps(response_message, indent=2, ensure_ascii=False)}")
       return response_message

# --- è¿è¡Œæ•´ä¸ªåä½œæµç¨‹ ---
planner_agent_logic()
```

---

## ç¬¬å››ç« ï¼šæ€»ç»“ä¸æœªæ¥å±•æœ›

ğŸš€ æœ¬ç¯‡æ–‡æ¡£ä»**åµŒå…¥å¼AIå’ŒTinyML**çš„åŸºç¡€å‡ºå‘ï¼Œç³»ç»Ÿæ€§åœ°æ¢³ç†äº†ä»**ç¡¬ä»¶èŠ¯ç‰‡åˆ°è½¯ä»¶æ¡†æ¶**ï¼Œå†åˆ°**è½»é‡åŒ–æ¨¡å‹**çš„å®Œæ•´æŠ€æœ¯æ ˆï¼Œå¹¶é€šè¿‡è¯¦å°½çš„éƒ¨ç½²æµç¨‹å±•ç¤ºäº†å…¶åœ¨**ç‰©è”ç½‘é¢†åŸŸ**çš„å·¨å¤§æ½œåŠ›ã€‚

æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬é€šè¿‡æ·±å…¥çš„åŸç†å‰–æå’Œä¸ºåˆå­¦è€…ä¼˜åŒ–çš„ä»£ç ç¤ºä¾‹ï¼Œæ¢è®¨äº†**AIäº¤äº’æ–¹å¼çš„æ¼”è¿›**ã€‚æŠ€æœ¯çš„å‘å±•æ­£æ¨åŠ¨AIä»ä¸€ä¸ª**è¢«åŠ¨çš„å·¥å…·æ‰§è¡Œè€…ï¼ˆFunction Callingï¼‰**ï¼Œæ¼”å˜ä¸ºä¸€ä¸ª**é«˜æ•ˆçš„ä¿¡æ¯ç†è§£è€…ï¼ˆMCPï¼‰**ï¼Œå¹¶æœ€ç»ˆèµ°å‘ä¸€ä¸ª**èƒ½å¤Ÿè‡ªä¸»åä½œçš„ç¤¾ä¼šå‚ä¸è€…ï¼ˆA2Aåè®®ï¼‰**ã€‚

æˆªè‡³**2025å¹´8æœˆ**ï¼Œæˆ‘ä»¬æ­£å¤„åœ¨è¿™ä¸€å˜é©çš„å…³é”®æ—¶æœŸã€‚**TinyMLæŠ€æœ¯**æ­£åœ¨è®©æ•°ä»¥ä¸‡äº¿è®¡çš„è®¾å¤‡æ‹¥æœ‰æœ¬åœ°æ™ºèƒ½ï¼Œè€Œæ›´é«˜çº§çš„**AI Agentåè®®**åˆ™é¢„ç¤ºç€ä¸€ä¸ªç”±**ç¾¤ä½“æ™ºèƒ½**é©±åŠ¨çš„ã€æ›´åŠ è‡ªåŠ¨åŒ–å’Œå»ä¸­å¿ƒåŒ–çš„æœªæ¥ã€‚æŒæ¡è¿™äº›ä»**ç«¯åˆ°äº‘ã€ä»ä¸ªä½“åˆ°ç¾¤ä½“**çš„æŠ€æœ¯ï¼Œå°†æ˜¯åœ¨ä¸‹ä¸€æ³¢æ™ºèƒ½åŒ–æµªæ½®ä¸­è·å¾—æˆåŠŸçš„å…³é”®ã€‚

---

## è´¡çŒ®

æ¬¢è¿æäº¤ Issues å’Œ Pull Requests æ¥å®Œå–„è¿™ä»½æ–‡æ¡£ã€‚

## è®¸å¯è¯

æœ¬æ–‡æ¡£éµå¾ª MIT è®¸å¯è¯ã€‚
